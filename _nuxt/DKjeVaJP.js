import{d as L,F as S,r as P,o as D,G as j,y,z as _,A as e,H as a,I as R,J as n,K as V,L as U,M as z,N as H,B as m}from"./DNDmJ46e.js";import{M as G}from"./Dmf0vrJi.js";function J(x){if(!Array.isArray(x)||x.length===0)return alert("Invalid input: cashFlows must be a non-empty array."),null;let v=!1,o=!1;for(const u of x)u>0&&(v=!0),u<0&&(o=!0);if(!v||!o)return alert("IRR requires at least one positive and one negative cash flow."),null;const w=1e3,p=1e-6;let h=.1;function c(u,i){let b=0;for(let l=0;l<i.length;l++)b+=i[l]/Math.pow(1+u,l);return b}function k(u,i){let b=0;for(let l=1;l<i.length;l++)b-=i[l]*l/Math.pow(1+u,l+1);return b}let g=h;for(let u=0;u<w;u++){const i=c(g,x);if(Math.abs(i)<p)return g;const b=k(g,x);if(Math.abs(b)<p)return alert("IRR calculation: Derivative too close to zero. Potential convergence issue or no real root."),null;let l=g-i/b;if(l<=-1&&(l=(g+-.99)/2,l>=g))return alert("IRR calculation: Rate moving in an unexpected direction below -100%."),null;g=l}return alert("IRR calculation did not converge within the maximum iterations."),null}const K={class:"grid gap-6 mb-6 md:grid-cols-2"},O=["max"],Q={class:"col-span-2"},W=["disabled","required"],X=["disabled","required"],Z=["disabled","required"],$={class:"w-full text-sm text-center"},ee={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},te={class:"px-6 py-4"},oe=["onUpdate:modelValue"],re={class:"w-full text-sm text-center"},se={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},le={class:"px-6 py-4"},ae=["onUpdate:modelValue"],ne={id:"modalEl",tabindex:"-1",class:"fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},ue={class:"relative w-full max-w-7xl max-h-full"},ie={key:0,class:"relative bg-white rounded-lg shadow-sm dark:bg-gray-700"},de={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200"},pe={class:"text-lg font-semibold text-white"},be={class:"p-4 md:p-5"},me={class:"relative overflow-x-auto"},ge={class:"w-full text-sm text-center"},ce={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},ye={class:"px-6 py-4"},_e={class:"px-6 py-4"},fe={class:"px-6 py-4"},xe={class:"px-6 py-4"},ve={class:"px-6 py-4"},he={class:"px-6 py-4"},Ie=L({__name:"index",setup(x){let v=null;const o=S({sex:"male",age:60,ins_period:"1",ins_period_n_year_or_to_age:4,payment_period:"1",payment_period_n_year_or_to_age:2,sa:1e3,cash_bonus_type:"3",cash_bonus:"",cash_bonus_every:"",cash_bonus_to_age:"",matuarity:202,entry_age:60,premium:971}),w=P([]),p=P(),h=S({}),c=S({}),k=P(!1);D(()=>{const s=document.getElementById("modalEl");if(s){const t={onHide:()=>{k.value=!1}};v=new G(s,t)}else console.warn("Modal element with ID 'modalEl' not found. Ensure it's present in your template.");p.value=5}),j(p,s=>{for(let t=0;t<s;t++)h[t]=o.premium??0,c[t]=t==2?2:0});const g=()=>{const s=parseInt(o.ins_period_n_year_or_to_age.toString()),t=parseInt(o.age.toString()),r=parseInt(o.cash_bonus_type.toString()),f=parseInt(o.cash_bonus_every.toString()),A=parseInt(o.cash_bonus.toString());w.value=[];for(let d=0;d<s;d++){let C=u(d)?i(d):0,B=0,I=0,M=0,T=0;r==3?(B=l(d),I=E(d)):r==1&&d%f==0&&(B=A,I=b(A)),M=d==s-1?F(d):0,T=I-C+M,w.value.push({age:t+d,year:d,premium:C,cashBonusRate:B,cashBonus:I,matuarity:M,cf:T})}v&&(v.show(),k.value=!0)},u=s=>parseInt(o.payment_period_n_year_or_to_age.toString())>s,i=s=>h[s]??0,b=(s,t)=>s?parseInt(o.sa.toString())*(s/100):0,l=s=>c[s]??0,E=s=>{const t=c[s]??0;return t?parseInt(o.sa.toString())*(t/100):0},q=s=>{const t=c[s]??0;return t?parseInt(o.sa.toString())*(t/100):0},F=s=>parseInt(o.ins_period_n_year_or_to_age.toString())==s+1?parseInt(o.sa.toString())*(o.matuarity/100):0,N=s=>parseInt(o.ins_period_n_year_or_to_age.toString())==s+1?parseInt(o.sa.toString())*(parseInt(o.matuarity.toString())/100):u(s)?q(s)-i(s):q(s),Y=()=>{let s=[];for(let t=0;t<p.value;t++)s.push(N(t));if(s.length>0){const t=J(s);return t?(t*100).toFixed(4)+"% | ("+t.toFixed(6)+")":""}return""};return(s,t)=>(_(),y(V,null,[e("form",{class:"mx-auto",onSubmit:z(g,["prevent"])},[e("div",K,[e("div",null,[t[16]||(t[16]=e("label",{for:"sex",class:"block mb-2 text-sm font-medium text-gray-900"},"Sex : ",-1)),a(e("select",{id:"sex","onUpdate:modelValue":t[0]||(t[0]=r=>o.sex=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},t[15]||(t[15]=[e("option",{value:"male",selected:""},"Male",-1),e("option",{value:"female"},"Female",-1)]),512),[[R,o.sex]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"age",class:"block mb-2 text-sm font-medium text-gray-900"},"Age :",-1)),a(e("input",{type:"number",id:"age","onUpdate:modelValue":t[1]||(t[1]=r=>o.age=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",required:""},null,512),[[n,o.age]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"ins_period",class:"block mb-2 text-sm font-medium text-gray-900"},"Insurance Period :",-1)),a(e("select",{id:"ins_period","onUpdate:modelValue":t[2]||(t[2]=r=>o.ins_period=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},t[18]||(t[18]=[e("option",{value:"1",selected:""},"N-Years",-1),e("option",{value:"2"},"To Age",-1)]),512),[[R,o.ins_period]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"ins_period_n_year_or_to_age",class:"block mb-2 text-sm font-medium text-gray-900"},"N-Years or To Age :",-1)),a(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=r=>o.ins_period_n_year_or_to_age=r),id:"ins_period_n_year_or_to_age",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",required:""},null,512),[[n,o.ins_period_n_year_or_to_age]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"payment_period",class:"block mb-2 text-sm font-medium text-gray-900"},"Payment Period :",-1)),a(e("select",{id:"payment_period","onUpdate:modelValue":t[4]||(t[4]=r=>o.payment_period=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},t[21]||(t[21]=[e("option",{value:"1",selected:""},"N-Years",-1),e("option",{value:"2"},"To Age",-1)]),512),[[R,o.payment_period]])]),e("div",null,[t[23]||(t[23]=e("label",{for:"payment_period_n_year_or_to_age",class:"block mb-2 text-sm font-medium text-gray-900"},"N-Years or To Age :",-1)),a(e("input",{type:"number",id:"payment_period_n_year_or_to_age","onUpdate:modelValue":t[5]||(t[5]=r=>o.payment_period_n_year_or_to_age=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",max:o.ins_period_n_year_or_to_age,required:""},null,8,O),[[n,o.payment_period_n_year_or_to_age]])]),e("div",Q,[t[24]||(t[24]=e("label",{for:"n_year_or_to_age",class:"block mb-2 text-sm font-medium text-gray-900"},"SA (Sum Assured) :",-1)),a(e("input",{type:"number",id:"sa","onUpdate:modelValue":t[6]||(t[6]=r=>o.sa=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",required:""},null,512),[[n,o.sa]])]),e("div",null,[t[26]||(t[26]=e("label",{for:"cash_bonus_type",class:"block mb-2 text-sm font-medium text-gray-900"},"Cash Bonus Type :",-1)),a(e("select",{id:"cash_bonus_type","onUpdate:modelValue":t[7]||(t[7]=r=>o.cash_bonus_type=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},t[25]||(t[25]=[e("option",{value:"1"},"Cash Bonus every x years",-1),e("option",{value:"2",disabled:""},"Type 1 + to age",-1),e("option",{value:"3",selected:""},"Custom",-1),e("option",{value:"4",disabled:""},"None",-1)]),512),[[R,o.cash_bonus_type]])]),e("div",null,[t[27]||(t[27]=e("label",{for:"cash_bonus",class:"block mb-2 text-sm font-medium text-gray-900"},"Cash Bonus (%) :",-1)),a(e("input",{type:"number",id:"cash_bonus","onUpdate:modelValue":t[8]||(t[8]=r=>o.cash_bonus=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",min:"0",disabled:!["1","2"].includes(o.cash_bonus_type),required:["1","2"].includes(o.cash_bonus_type)},null,8,W),[[n,o.cash_bonus]])]),e("div",null,[t[28]||(t[28]=e("label",{for:"cash_bonus_every",class:"block mb-2 text-sm font-medium text-gray-900"},"Cash Bonus Every (Years) :",-1)),a(e("input",{type:"number",id:"cash_bonus_every","onUpdate:modelValue":t[9]||(t[9]=r=>o.cash_bonus_every=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",min:"0",disabled:!["1","2"].includes(o.cash_bonus_type),required:["1","2"].includes(o.cash_bonus_type)},null,8,X),[[n,o.cash_bonus_every]])]),e("div",null,[t[29]||(t[29]=e("label",{for:"cash_bonus_to_age",class:"block mb-2 text-sm font-medium text-gray-900"},"Cash Bonus To Age :",-1)),a(e("input",{type:"number",id:"cash_bonus_to_age","onUpdate:modelValue":t[10]||(t[10]=r=>o.cash_bonus_to_age=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",min:"0",disabled:!["2"].includes(o.cash_bonus_type),required:["2"].includes(o.cash_bonus_type)},null,8,Z),[[n,o.cash_bonus_to_age]])]),e("div",null,[t[30]||(t[30]=e("label",{for:"matuarity",class:"block mb-2 text-sm font-medium text-gray-900"},"Matuarity :",-1)),a(e("input",{type:"number",id:"matuarity","onUpdate:modelValue":t[11]||(t[11]=r=>o.matuarity=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",required:""},null,512),[[n,o.matuarity]])]),e("div",null,[t[31]||(t[31]=e("label",{for:"entry_age",class:"block mb-2 text-sm font-medium text-gray-900"},"Entry Age :",-1)),a(e("input",{type:"number",id:"entry_age","onUpdate:modelValue":t[12]||(t[12]=r=>o.entry_age=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",required:""},null,512),[[n,o.entry_age]])]),e("div",null,[t[32]||(t[32]=e("label",{for:"premium",class:"block mb-2 text-sm font-medium text-gray-900"},"Premium (insurance premium) :",-1)),a(e("input",{type:"number",id:"premium","onUpdate:modelValue":t[13]||(t[13]=r=>o.premium=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0",required:""},null,512),[[n,o.premium]])]),e("div",null,[t[33]||(t[33]=e("label",{for:"premium",class:"block mb-2 text-sm font-medium text-gray-900"},"Age table loop: ",-1)),a(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=r=>p.value=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",min:"0",required:""},null,512),[[n,p.value]])]),e("div",null,[e("table",$,[t[34]||(t[34]=e("thead",{class:"text-xs text-white uppercase bg-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3",colspan:"2"},"PREMIUM")]),e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Age"),e("th",{scope:"col",class:"px-6 py-3"},"Male/Female")])],-1)),e("tbody",null,[(_(!0),y(V,null,U(p.value,r=>(_(),y("tr",{key:r,class:"bg-white border-b border-gray-200"},[e("th",ee,m(r-1),1),e("td",te,[a(e("input",{type:"number","onUpdate:modelValue":f=>h[r-1]=f,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0"},null,8,oe),[[n,h[r-1]]])])]))),128))])])]),e("div",null,[e("table",re,[t[35]||(t[35]=e("thead",{class:"text-xs text-white uppercase bg-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3",colspan:"2"},"Cash Type 3")]),e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Year"),e("th",{scope:"col",class:"px-6 py-3"},"%")])],-1)),e("tbody",null,[(_(!0),y(V,null,U(p.value,r=>(_(),y("tr",{key:r,class:"bg-white border-b border-gray-200"},[e("th",se,m(r-1),1),e("td",le,[a(e("input",{type:"number","onUpdate:modelValue":f=>c[r-1]=f,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",min:"0"},null,8,ae),[[n,c[r-1]]])])]))),128))])])])]),t[36]||(t[36]=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center"}," Calculate ",-1))],32),e("div",ne,[e("div",ue,[k.value?(_(),y("div",ie,[e("div",de,[e("h3",pe," IRR : "+m(Y()),1),t[37]||(t[37]=e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm h-8 w-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"modalEl"},[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})]),e("span",{class:"sr-only"},"Close modal")],-1))]),e("div",be,[e("div",me,[e("table",ge,[t[38]||(t[38]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Age"),e("th",{scope:"col",class:"px-6 py-3"},"Year"),e("th",{scope:"col",class:"px-6 py-3"},"Premium"),e("th",{scope:"col",class:"px-6 py-3"},"Cash Bonus Rate"),e("th",{scope:"col",class:"px-6 py-3"},"Cash Bonus"),e("th",{scope:"col",class:"px-6 py-3"},"Mat"),e("th",{scope:"col",class:"px-6 py-3"},"CF")])],-1)),e("tbody",null,[(_(!0),y(V,null,U(w.value,(r,f)=>(_(),y("tr",{class:"bg-white border-b border-gray-200",key:f},[e("th",ce,m(r.age),1),e("td",ye,m(r.year),1),e("td",_e,m(r.premium),1),e("td",fe,m(r.cashBonusRate)+".00%",1),e("td",xe,m(r.cashBonus.toFixed(2)),1),e("td",ve,m(r.matuarity.toFixed(2)),1),e("td",he,m(r.cf.toFixed(2)),1)]))),128))])])])])])):H("",!0)])])],64))}});export{Ie as default};
